#Generated by Kickstart Configurator
#platform=x86

#System language
lang en_US
#Language modules to install
#langsupport en_US
#System keyboard
keyboard us
#System mouse
#mouse
#System timezone
timezone Asia/Kolkata
#Root password
rootpw --disabled
#Initial user
user dev_stag --fullname "staging" --password teststag1234
#Reboot after installation
reboot
#Use text mode install
text
#Install OS instead of upgrade
install
#Use CDROM installation media
cdrom
#System bootloader configuration
bootloader --location=mbr
#Clear the Master Boot Record
zerombr
#Partition clearing information
clearpart --drives=sda --all
#Disk partitioning information
autopart
#System authorization infomation
auth  --useshadow  --enablemd5
#Network information
network --device=$interface --bootproto=static --ip=$ip --netmask=$netmask --gateway=$gateway --nameserver=$nameserver --onboot=yes --hostname=$hostname

#Firewall configuration
firewall --disabled
#Do not configure the X Window System
skipx

%packages
@ ubuntu-server
openssh-server
ftp
build-essential

%post

$post

sed -i s/"#PasswordAuthentication yes"/"PasswordAuthentication no"/g /etc/ssh/sshd_config
service ssh restart

echo 'Acquire::http::Proxy "http://$proxy:$port/";' > /etc/apt/apt.conf

sed -i s/"GRUB_CMDLINE_LINUX_DEFAULT"/"#GRUB_CMDLINE_LINUX_DEFAULT"/g /etc/default/grub
sed -i s/'GRUB_CMDLINE_LINUX=\"\"'/'GRUB_CMDLINE_LINUX=\"text\"'/g /etc/default/grub
sed -i s/'#GRUB_TERMINAL'/'GRUB_TERMINAL'/g /etc/default/grub

